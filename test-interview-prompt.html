<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Interview Prompt Workflow</title>
</head>
<body>
    <h1>Interview Session Prompt Workflow Test</h1>
    
    <div>
        <h2>Test Setup:</h2>
        <ol>
            <li>Open DevTools Console</li>
            <li>Set interview mode to enabled (interview-like or full-interview)</li>
            <li>Set interview frequency to "manual"</li>
            <li>Clear any existing sessions in database</li>
            <li>Navigate to Problem Generator page</li>
        </ol>
    </div>
    
    <div>
        <h2>Expected New Behavior:</h2>
        <ul>
            <li><strong>Before:</strong> Interview button shown after problems generated</li>
            <li><strong>After:</strong> Modal prompt appears BEFORE session creation</li>
            <li>User chooses: "Regular Practice" or "Interview Mode"</li>
            <li>Session is created based on choice</li>
            <li>Problems are shown immediately after choice</li>
        </ul>
    </div>

    <div>
        <h2>Test Cases:</h2>
        <h3>1. Manual Interview Mode Enabled</h3>
        <ul>
            <li>✅ Should show interview prompt modal when no session exists</li>
            <li>✅ Choosing "Regular Practice" → creates regular session</li>
            <li>✅ Choosing "Interview Mode" → creates interview session</li>
        </ul>

        <h3>2. Interview Mode Disabled</h3>
        <ul>
            <li>✅ Should NOT show prompt, creates regular session immediately</li>
        </ul>

        <h3>3. Non-Manual Frequency (Weekly/Level-up)</h3>
        <ul>
            <li>✅ Should NOT show prompt, creates regular session immediately</li>
        </ul>

        <h3>4. Existing Session</h3>
        <ul>
            <li>✅ Should resume existing session, no prompt shown</li>
        </ul>
    </div>

    <div>
        <h2>Console Commands for Testing:</h2>
        <pre>
// Clear all sessions to trigger prompt
chrome.runtime.sendMessage({action: "clearAllSessions"}, console.log);

// Check current settings
chrome.runtime.sendMessage({action: "getSettings"}, response => {
    console.log("Interview mode:", response.interviewMode);
    console.log("Interview frequency:", response.interviewFrequency);
});

// Set manual interview mode
chrome.runtime.sendMessage({
    action: "updateSettings", 
    settings: {
        interviewMode: "interview-like",
        interviewFrequency: "manual"
    }
}, console.log);
        </pre>
    </div>

    <div style="margin-top: 20px; padding: 15px; background: #f0f8ff; border-left: 4px solid #007acc;">
        <strong>Key Improvement:</strong> The interview choice now happens at the optimal moment - 
        right when session creation is needed, before any problems are generated or displayed.
        This prevents waste and provides a natural decision point.
    </div>
</body>
</html>