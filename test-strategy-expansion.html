<!DOCTYPE html>
<html>
<head>
    <title>Test Strategy Map Expansion</title>
    <style>
        /* Load the CSS styles to test the expansion behavior */
        body { font-family: Arial, sans-serif; padding: 20px; }
        
        .test-container {
            width: 320px;
            height: 400px;
            border: 2px solid #ccc;
            overflow: hidden;
            position: relative;
            background: #f5f5f5;
        }
        
        .cm-sidenav__content {
            height: calc(100vh - 60px);
            max-height: calc(100vh - 60px);
            overflow-y: auto;
            padding: 10px;
            background: white;
        }
        
        .cm-sidenav__content.strategy-expanded {
            max-height: none !important;
            height: auto !important;
            overflow-y: visible !important;
        }
        
        .tag-strategy-container {
            margin: 10px 0;
            border: 1px solid #ddd;
            padding: 10px;
            transition: max-height 0.3s ease-out;
        }
        
        .tag-strategy-container.expanded {
            max-height: none !important;
            height: auto !important;
            overflow: visible !important;
            background: #e8f5e8;
        }
        
        .tag-list {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin: 10px 0;
        }
        
        .tag {
            background: #007bff;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
        }
        
        .show-more-btn {
            cursor: pointer;
            color: #007bff;
            font-size: 11px;
            padding: 2px 6px;
            border: 1px solid #007bff;
            border-radius: 4px;
            margin: 5px 0;
        }
        
        .status {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #007bff;
            color: white;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Strategy Map Expansion Test</h1>
    
    <div class="status" id="status">Status: Ready</div>
    
    <div class="test-container">
        <div class="cm-sidenav__content" id="sidebarContent">
            <h3>Strategy Map</h3>
            
            <div class="tag-strategy-container" id="container1">
                <h4>Tier 1: Basic Concepts</h4>
                <div class="tag-list" id="tagList1">
                    <span class="tag">Array</span>
                    <span class="tag">String</span>
                    <span class="tag">Hash Table</span>
                    <span class="tag" style="display: none;">Two Pointers</span>
                    <span class="tag" style="display: none;">Sliding Window</span>
                    <span class="tag" style="display: none;">Binary Search</span>
                    <span class="tag" style="display: none;">Stack</span>
                    <span class="tag" style="display: none;">Queue</span>
                    <span class="tag" style="display: none;">Linked List</span>
                    <span class="tag" style="display: none;">Tree</span>
                </div>
                <div class="show-more-btn" onclick="toggleExpansion('container1')" id="btn1">
                    +7 more
                </div>
            </div>
            
            <div class="tag-strategy-container" id="container2">
                <h4>Tier 2: Advanced Concepts</h4>
                <div class="tag-list" id="tagList2">
                    <span class="tag">Dynamic Programming</span>
                    <span class="tag">Greedy</span>
                    <span class="tag">Graph</span>
                    <span class="tag" style="display: none;">Backtracking</span>
                    <span class="tag" style="display: none;">Divide and Conquer</span>
                    <span class="tag" style="display: none;">Trie</span>
                    <span class="tag" style="display: none;">Union Find</span>
                    <span class="tag" style="display: none;">Segment Tree</span>
                </div>
                <div class="show-more-btn" onclick="toggleExpansion('container2')" id="btn2">
                    +5 more
                </div>
            </div>
            
            <p>Some additional content to test scrolling behavior...</p>
            <p>This content should be visible when expanded without scroll bars.</p>
        </div>
    </div>
    
    <div style="margin-top: 20px;">
        <h3>Test Instructions:</h3>
        <ol>
            <li>Click "+7 more" in Tier 1 - container should expand to show all tags</li>
            <li>Verify no scroll bar appears when expanded</li>
            <li>Click "show less" to collapse - should restore normal height</li>
            <li>Test with Tier 2 as well</li>
        </ol>
    </div>

    <script>
        let expandedContainers = new Set();

        function toggleExpansion(containerId) {
            const container = document.getElementById(containerId);
            const sidebarContent = document.getElementById('sidebarContent');
            const button = document.getElementById('btn' + containerId.slice(-1));
            const tagList = document.getElementById('tagList' + containerId.slice(-1));
            const hiddenTags = tagList.querySelectorAll('.tag[style*="display: none"]');
            const status = document.getElementById('status');

            if (expandedContainers.has(containerId)) {
                // Collapse
                expandedContainers.delete(containerId);
                hiddenTags.forEach(tag => tag.style.display = 'none');
                button.textContent = `+${hiddenTags.length} more`;
                
                // Remove expanded classes
                container.classList.remove('expanded');
                
                if (expandedContainers.size === 0) {
                    sidebarContent.classList.remove('strategy-expanded');
                    sidebarContent.style.maxHeight = '';
                    sidebarContent.style.height = '';
                    sidebarContent.style.overflowY = '';
                    status.textContent = 'Status: All collapsed - normal scroll behavior';
                }
            } else {
                // Expand
                expandedContainers.add(containerId);
                hiddenTags.forEach(tag => tag.style.display = 'inline-block');
                button.textContent = 'show less';
                
                // Add expanded classes
                container.classList.add('expanded');
                sidebarContent.classList.add('strategy-expanded');
                
                // Apply expansion styles
                sidebarContent.style.maxHeight = 'none';
                sidebarContent.style.height = 'auto';
                sidebarContent.style.overflowY = 'visible';
                
                status.textContent = `Status: ${expandedContainers.size} container(s) expanded - no scroll bars`;
            }
        }
    </script>
</body>
</html>